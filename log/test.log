  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "course_students"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (89.0ms)[0m  [1m[35mCREATE TABLE "course_students" ("course_id" integer, "student_id" integer)[0m
  [1m[35m (87.9ms)[0m  [1m[35mCREATE  INDEX "index_course_students_on_course_id" ON "course_students" ("course_id")[0m
  [1m[35m (0.5ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_course_students_on_course_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_course_students_on_course_id' AND type='index'
[0m
  [1m[35m (89.1ms)[0m  [1m[35mCREATE  INDEX "index_course_students_on_student_id" ON "course_students" ("student_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "courses"[0m
  [1m[35m (84.4ms)[0m  [1m[35mCREATE TABLE "courses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "year" integer NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "evaluations"[0m
  [1m[35m (85.8ms)[0m  [1m[35mCREATE TABLE "evaluations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(30) NOT NULL, "approbation_grade" integer NOT NULL, "date" datetime NOT NULL, "course_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (76.8ms)[0m  [1m[35mCREATE  INDEX "index_evaluations_on_course_id" ON "evaluations" ("course_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "student_grades"[0m
  [1m[35m (76.7ms)[0m  [1m[35mCREATE TABLE "student_grades" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "grade" decimal(2,2), "evaluation_id" integer, "student_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (76.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_student_grades_on_evaluation_id_and_student_id" ON "student_grades" ("evaluation_id", "student_id")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_student_grades_on_evaluation_id_and_student_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_student_grades_on_evaluation_id_and_student_id' AND type='index'
[0m
  [1m[35m (75.9ms)[0m  [1m[35mCREATE  INDEX "index_student_grades_on_evaluation_id" ON "student_grades" ("evaluation_id")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_student_grades_on_evaluation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_student_grades_on_evaluation_id' AND type='index'
[0m
  [1m[35m (1.8ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_student_grades_on_evaluation_id_and_student_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_student_grades_on_evaluation_id_and_student_id' AND type='index'
[0m
  [1m[35m (73.2ms)[0m  [1m[35mCREATE  INDEX "index_student_grades_on_student_id" ON "student_grades" ("student_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "students"[0m
  [1m[35m (76.3ms)[0m  [1m[35mCREATE TABLE "students" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar(30) NOT NULL, "last_name" varchar(30) NOT NULL, "dni" integer(8) NOT NULL, "number" varchar(10), "email" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (77.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_students_on_email" ON "students" ("email")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (76.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "crypted_password" varchar, "salt" varchar, "first_name" varchar(30) NOT NULL, "last_name" varchar(30) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (76.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (80.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (63.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180126164632)[0m
  [1m[35m (55.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180105205129),
(20180124153706),
(20171220192740),
(20171222184949),
(20171222201027),
(20180109211740),
(20171220160712),
(20171222205051),
(20171219234659),
(20171219184902),
(20171221140926);

[0m
  [1m[35m (75.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-02-01 15:50:43.843402"], ["updated_at", "2018-02-01 15:50:43.843402"]]
  [1m[35m (57.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-01 15:50:44.297241', '2018-02-01 15:50:44.297241', 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-01 15:50:44.297241', '2018-02-01 15:50:44.297241', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-01 15:50:44.305130', '2018-02-01 15:50:44.305130', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-01 15:50:44.310877', '2018-02-01 15:50:44.310877', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-01 15:50:44.310877', '2018-02-01 15:50:44.310877', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-01 15:50:44.310877', '2018-02-01 15:50:44.310877', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-01 15:50:44.310877', '2018-02-01 15:50:44.310877', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-01 15:50:44.319379', '2018-02-01 15:50:44.319379', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 15:50:44.319379', '2018-02-01 15:50:44.319379', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 15:50:44.319379', '2018-02-01 15:50:44.319379', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-01 15:50:44.319379', '2018-02-01 15:50:44.319379', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 15:50:44.319379', '2018-02-01 15:50:44.319379', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 15:50:44.319379', '2018-02-01 15:50:44.319379', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-01 15:50:44.328641', '2018-02-01 15:50:44.328641', 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-01 15:50:44.328641', '2018-02-01 15:50:44.328641', 694384993)[0m
  [1m[35m (58.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_adding_associated_students
--------------------------------------------------------
  [1m[36mCourse Load (0.8ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ? LIMIT ?[0m  [["course_id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_course_with_year_attribute
--------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_not_valid_incorrectly_year's_format
-----------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 457], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", -2017], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 1987], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_valid_adding_associated_evaluations
-----------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-01 15:50:44.594520"], ["updated_at", "2018-02-01 15:50:44.594520"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CourseTest: test_should_not_valid_year_out_of_accepted_range
------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2013], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2023], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2014], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2021], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
CourseTest: test_should_not_valid_already_exist_course
------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2016], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2017], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CourseTest: test_should_valid_correctly_year's_format
-----------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_evaluations
----------------------------------------------------------------------------
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT "evaluations".* FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[36mStudentGrade Load (0.3ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 464715983]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 464715983]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CourseTest: test_should_not_valid_course_without_year_attribute
---------------------------------------------------------------
  [1m[36mCourse Load (0.7ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_students
-------------------------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-01 15:51:09.036989', '2018-02-01 15:51:09.036989', 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-01 15:51:09.036989', '2018-02-01 15:51:09.036989', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-01 15:51:09.044879', '2018-02-01 15:51:09.044879', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-01 15:51:09.051196', '2018-02-01 15:51:09.051196', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-01 15:51:09.051196', '2018-02-01 15:51:09.051196', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-01 15:51:09.051196', '2018-02-01 15:51:09.051196', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-01 15:51:09.051196', '2018-02-01 15:51:09.051196', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-01 15:51:09.060094', '2018-02-01 15:51:09.060094', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 15:51:09.060094', '2018-02-01 15:51:09.060094', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 15:51:09.060094', '2018-02-01 15:51:09.060094', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-01 15:51:09.060094', '2018-02-01 15:51:09.060094', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 15:51:09.060094', '2018-02-01 15:51:09.060094', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 15:51:09.060094', '2018-02-01 15:51:09.060094', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-01 15:51:09.069957', '2018-02-01 15:51:09.069957', 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-01 15:51:09.069957', '2018-02-01 15:51:09.069957', 694384993)[0m
  [1m[35m (62.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
EvaluationTest: test_should_valid_amount_of_disapproved
-------------------------------------------------------
  [1m[36mEvaluation Load (0.5ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_approval_percentage
-----------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
EvaluationTest: test_should_valid_adding_students_grades_of_evaluation
----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_absentees
-----------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_with_different_date_to_year's_course
-------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_without_all_attributes
-----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
EvaluationTest: test_should_valid_deleting_evaluation_and_its_associated_students_grades
----------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.3ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "student_grades" WHERE (evaluation_id = 45859956) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_approved
----------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
EvaluationTest: test_should_valid_evaluation_with_all_attributes
----------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "courses"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (87.9ms)[0m  [1m[35mCREATE TABLE "courses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "year" integer NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "courses_students"[0m
  [1m[35m (88.1ms)[0m  [1m[35mCREATE TABLE "courses_students" ("course_id" integer, "student_id" integer)[0m
  [1m[35m (87.7ms)[0m  [1m[35mCREATE  INDEX "index_courses_students_on_course_id" ON "courses_students" ("course_id")[0m
  [1m[35m (0.8ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_courses_students_on_course_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_courses_students_on_course_id' AND type='index'
[0m
  [1m[35m (118.7ms)[0m  [1m[35mCREATE  INDEX "index_courses_students_on_student_id" ON "courses_students" ("student_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "evaluations"[0m
  [1m[35m (98.3ms)[0m  [1m[35mCREATE TABLE "evaluations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(30) NOT NULL, "approbation_grade" integer NOT NULL, "date" datetime NOT NULL, "course_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (99.3ms)[0m  [1m[35mCREATE  INDEX "index_evaluations_on_course_id" ON "evaluations" ("course_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "student_grades"[0m
  [1m[35m (98.7ms)[0m  [1m[35mCREATE TABLE "student_grades" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "grade" decimal(2,2), "evaluation_id" integer, "student_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (88.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_student_grades_on_evaluation_id_and_student_id" ON "student_grades" ("evaluation_id", "student_id")[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_student_grades_on_evaluation_id_and_student_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_student_grades_on_evaluation_id_and_student_id' AND type='index'
[0m
  [1m[35m (98.0ms)[0m  [1m[35mCREATE  INDEX "index_student_grades_on_evaluation_id" ON "student_grades" ("evaluation_id")[0m
  [1m[35m (2.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_student_grades_on_evaluation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_student_grades_on_evaluation_id' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_student_grades_on_evaluation_id_and_student_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_student_grades_on_evaluation_id_and_student_id' AND type='index'
[0m
  [1m[35m (97.2ms)[0m  [1m[35mCREATE  INDEX "index_student_grades_on_student_id" ON "student_grades" ("student_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "students"[0m
  [1m[35m (84.7ms)[0m  [1m[35mCREATE TABLE "students" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar(30) NOT NULL, "last_name" varchar(30) NOT NULL, "dni" integer(8) NOT NULL, "number" varchar(10), "email" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (88.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_students_on_email" ON "students" ("email")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (109.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "crypted_password" varchar, "salt" varchar, "first_name" varchar(30) NOT NULL, "last_name" varchar(30) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (99.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (86.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (74.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180201162608)[0m
  [1m[35m (88.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180105205129),
(20180124153706),
(20171220192740),
(20171222184949),
(20180126164632),
(20171222201027),
(20180109211740),
(20171220160712),
(20171222205051),
(20171219234659),
(20171219184902),
(20171221140926);

[0m
  [1m[35m (99.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-02-01 16:27:55.495967"], ["updated_at", "2018-02-01 16:27:55.495967"]]
  [1m[35m (75.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (2.6ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-01 16:27:55.782563', '2018-02-01 16:27:55.782563', 266338499)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-01 16:27:55.782563', '2018-02-01 16:27:55.782563', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-01 16:27:55.792148', '2018-02-01 16:27:55.792148', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-01 16:27:55.797576', '2018-02-01 16:27:55.797576', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-01 16:27:55.797576', '2018-02-01 16:27:55.797576', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-01 16:27:55.797576', '2018-02-01 16:27:55.797576', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-01 16:27:55.797576', '2018-02-01 16:27:55.797576', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-01 16:27:55.805965', '2018-02-01 16:27:55.805965', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 16:27:55.805965', '2018-02-01 16:27:55.805965', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 16:27:55.805965', '2018-02-01 16:27:55.805965', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-01 16:27:55.805965', '2018-02-01 16:27:55.805965', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 16:27:55.805965', '2018-02-01 16:27:55.805965', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 16:27:55.805965', '2018-02-01 16:27:55.805965', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-01 16:27:55.815403', '2018-02-01 16:27:55.815403', 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-01 16:27:55.815403', '2018-02-01 16:27:55.815403', 694384993)[0m
  [1m[35m (75.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_adding_associated_students
--------------------------------------------------------
  [1m[36mCourse Load (0.5ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ? LIMIT ?[0m  [["course_id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_course_with_year_attribute
--------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_students
-------------------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT "evaluations".* FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 464715983]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 464715983]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses" WHERE "courses"."id" = ?[0m  [["id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCoursesStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses_students" WHERE (course_id = 266338499) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
CourseTest: test_should_not_valid_already_exist_course
------------------------------------------------------
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2016], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2017], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_not_valid_incorrectly_year's_format
-----------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 457], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", -2017], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 1987], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_valid_adding_associated_evaluations
-----------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-01 16:27:56.191962"], ["updated_at", "2018-02-01 16:27:56.191962"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CourseTest: test_should_valid_correctly_year's_format
-----------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CourseTest: test_should_not_valid_course_without_year_attribute
---------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_evaluations
----------------------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT "evaluations".* FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[36mStudentGrade Load (0.3ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses" WHERE "courses"."id" = ?[0m  [["id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvaluation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "evaluations" WHERE (course_id = 266338499) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CourseTest: test_should_not_valid_year_out_of_accepted_range
------------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2013], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2023], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2014], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2021], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.4ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-01 17:01:24.727593', '2018-02-01 17:01:24.727593', 266338499)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-01 17:01:24.727593', '2018-02-01 17:01:24.727593', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-01 17:01:24.736624', '2018-02-01 17:01:24.736624', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-01 17:01:24.742274', '2018-02-01 17:01:24.742274', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-01 17:01:24.742274', '2018-02-01 17:01:24.742274', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-01 17:01:24.742274', '2018-02-01 17:01:24.742274', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-01 17:01:24.742274', '2018-02-01 17:01:24.742274', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-01 17:01:24.750767', '2018-02-01 17:01:24.750767', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 17:01:24.750767', '2018-02-01 17:01:24.750767', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 17:01:24.750767', '2018-02-01 17:01:24.750767', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-01 17:01:24.750767', '2018-02-01 17:01:24.750767', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 17:01:24.750767', '2018-02-01 17:01:24.750767', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 17:01:24.750767', '2018-02-01 17:01:24.750767', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-01 17:01:24.761045', '2018-02-01 17:01:24.761045', 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-01 17:01:24.761045', '2018-02-01 17:01:24.761045', 694384993)[0m
  [1m[35m (420.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CourseTest: test_should_not_valid_course_without_year_attribute
---------------------------------------------------------------
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_valid_adding_associated_evaluations
-----------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-01 17:01:25.304985"], ["updated_at", "2018-02-01 17:01:25.304985"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_students
-------------------------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT "evaluations".* FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[36mStudentGrade Load (0.3ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (1.2ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 464715983]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "courses" WHERE "courses"."id" = ?[0m  [["id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCoursesStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses_students" WHERE (course_id = 266338499) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_adding_associated_students
--------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ? LIMIT ?[0m  [["course_id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CourseTest: test_should_not_valid_year_out_of_accepted_range
------------------------------------------------------------
  [1m[36mCourse Load (1.0ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2013], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2023], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2014], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2021], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CourseTest: test_should_valid_correctly_year's_format
-----------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
CourseTest: test_should_not_valid_already_exist_course
------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2016], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2017], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_not_valid_incorrectly_year's_format
-----------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 457], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", -2017], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 1987], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_course_with_year_attribute
--------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_evaluations
----------------------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT "evaluations".* FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "courses" WHERE "courses"."id" = ?[0m  [["id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvaluation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "evaluations" WHERE (course_id = 266338499) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (2.6ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-01 17:01:33.004450', '2018-02-01 17:01:33.004450', 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-01 17:01:33.004450', '2018-02-01 17:01:33.004450', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-01 17:01:33.014379', '2018-02-01 17:01:33.014379', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-01 17:01:33.020183', '2018-02-01 17:01:33.020183', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-01 17:01:33.020183', '2018-02-01 17:01:33.020183', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-01 17:01:33.020183', '2018-02-01 17:01:33.020183', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-01 17:01:33.020183', '2018-02-01 17:01:33.020183', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-01 17:01:33.029183', '2018-02-01 17:01:33.029183', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 17:01:33.029183', '2018-02-01 17:01:33.029183', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 17:01:33.029183', '2018-02-01 17:01:33.029183', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-01 17:01:33.029183', '2018-02-01 17:01:33.029183', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 17:01:33.029183', '2018-02-01 17:01:33.029183', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 17:01:33.029183', '2018-02-01 17:01:33.029183', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-01 17:01:33.039033', '2018-02-01 17:01:33.039033', 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-01 17:01:33.039033', '2018-02-01 17:01:33.039033', 694384993)[0m
  [1m[35m (102.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_approved
----------------------------------------------------
  [1m[36mEvaluation Load (0.5ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
EvaluationTest: test_should_valid_deleting_evaluation_and_its_associated_students_grades
----------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "student_grades" WHERE (evaluation_id = 45859956) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_absentees
-----------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new_evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-01 17:01:33.454340"], ["updated_at", "2018-02-01 17:01:33.454340"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516266]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
EvaluationTest: test_should_valid_amount_of_disapproved
-------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_approval_percentage
-----------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 608570453], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (35.6ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 608570453], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT "students".* FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT "students".* FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 694384993]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new_evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-01 17:01:33.621898"], ["updated_at", "2018-02-01 17:01:33.621898"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 813516266]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516266]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
EvaluationTest: test_should_valid_evaluation_with_all_attributes
----------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_without_all_attributes
-----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
EvaluationTest: test_should_valid_adding_students_grades_of_evaluation
----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_with_different_date_to_year's_course
-------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.5ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-01 17:01:48.309888', '2018-02-01 17:01:48.309888', 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-01 17:01:48.309888', '2018-02-01 17:01:48.309888', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-01 17:01:48.320140', '2018-02-01 17:01:48.320140', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-01 17:01:48.327651', '2018-02-01 17:01:48.327651', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-01 17:01:48.327651', '2018-02-01 17:01:48.327651', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-01 17:01:48.327651', '2018-02-01 17:01:48.327651', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-01 17:01:48.327651', '2018-02-01 17:01:48.327651', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-01 17:01:48.338807', '2018-02-01 17:01:48.338807', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 17:01:48.338807', '2018-02-01 17:01:48.338807', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 17:01:48.338807', '2018-02-01 17:01:48.338807', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-01 17:01:48.338807', '2018-02-01 17:01:48.338807', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 17:01:48.338807', '2018-02-01 17:01:48.338807', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 17:01:48.338807', '2018-02-01 17:01:48.338807', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-01 17:01:48.350169', '2018-02-01 17:01:48.350169', 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-01 17:01:48.350169', '2018-02-01 17:01:48.350169', 694384993)[0m
  [1m[35m (105.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
StudentTest: test_should_valid_deleting_student_and_inscription_in_his/her_courses
----------------------------------------------------------------------------------
  [1m[36mStudent Load (0.6ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 870681499]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 897861732]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "students" WHERE "students"."id" = ?[0m  [["id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
StudentTest: test_should_valid_grade_in
---------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ? AND "student_grades"."evaluation_id" = 45859956 LIMIT ?[0m  [["student_id", 203926304], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ? AND "student_grades"."evaluation_id" = 45859956 LIMIT ?[0m  [["student_id", 694384993], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.3ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ? AND "student_grades"."evaluation_id" = 813516265 LIMIT ?[0m  [["student_id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTest: test_should_not_valid_student_without_all_required_attributes
--------------------------------------------------------------------------
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
StudentTest: test_should_valid_deleting_student_and_its_associated_grades
-------------------------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 870681499]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 897861732]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "students" WHERE "students"."id" = ?[0m  [["id", 203926304]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "student_grades" WHERE (student_id = 203926304) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
StudentTest: test_should_valid_adding_grade_for_evaluation
----------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" INNER JOIN "student_grades" ON "evaluations"."id" = "student_grades"."evaluation_id" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 464715983], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "evaluation_id", "student_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["grade", 8.0], ["evaluation_id", 464715983], ["student_id", 203926304], ["created_at", "2018-02-01 17:01:48.828311"], ["updated_at", "2018-02-01 17:01:48.828311"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" INNER JOIN "student_grades" ON "evaluations"."id" = "student_grades"."evaluation_id" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
StudentTest: test_should_valid_student_with_all_attributes
----------------------------------------------------------
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mStudent Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 21458794], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "josegonzalez@mail.com"], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 694384993]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.9ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-01 17:02:01.801583', '2018-02-01 17:02:01.801583', 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-01 17:02:01.801583', '2018-02-01 17:02:01.801583', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-01 17:02:01.811115', '2018-02-01 17:02:01.811115', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-01 17:02:01.818654', '2018-02-01 17:02:01.818654', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-01 17:02:01.818654', '2018-02-01 17:02:01.818654', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-01 17:02:01.818654', '2018-02-01 17:02:01.818654', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-01 17:02:01.818654', '2018-02-01 17:02:01.818654', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-01 17:02:01.831498', '2018-02-01 17:02:01.831498', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 17:02:01.831498', '2018-02-01 17:02:01.831498', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-01 17:02:01.831498', '2018-02-01 17:02:01.831498', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-01 17:02:01.831498', '2018-02-01 17:02:01.831498', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 17:02:01.831498', '2018-02-01 17:02:01.831498', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-01 17:02:01.831498', '2018-02-01 17:02:01.831498', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-01 17:02:01.843981', '2018-02-01 17:02:01.843981', 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-01 17:02:01.843981', '2018-02-01 17:02:01.843981', 694384993)[0m
  [1m[35m (75.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
StudentGradeTest: test_should_valid_approved?
---------------------------------------------
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 94782890], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 824998152], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 224919708], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 870681499], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
StudentGradeTest: test_should_not_valid_student's_grade_without_all_attributes
------------------------------------------------------------------------------
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 94782890], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 824998152], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 224919708], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 870681499], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
StudentGradeTest: test_should_valid_student's_grade_with_all_attributes
-----------------------------------------------------------------------
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 94782890], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 824998152], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 224919708], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 870681499], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 21458794], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "josegonzalez@mail.com"], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 694384993]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 464715983], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.6ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-04 17:14:13.442657', '2018-02-04 17:14:13.442657', 266338499)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-04 17:14:13.442657', '2018-02-04 17:14:13.442657', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-04 17:14:13.451876', '2018-02-04 17:14:13.451876', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-04 17:14:13.460071', '2018-02-04 17:14:13.460071', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-04 17:14:13.460071', '2018-02-04 17:14:13.460071', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-04 17:14:13.460071', '2018-02-04 17:14:13.460071', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-04 17:14:13.460071', '2018-02-04 17:14:13.460071', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-04 17:14:13.468307', '2018-02-04 17:14:13.468307', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:14:13.468307', '2018-02-04 17:14:13.468307', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:14:13.468307', '2018-02-04 17:14:13.468307', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-04 17:14:13.468307', '2018-02-04 17:14:13.468307', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:14:13.468307', '2018-02-04 17:14:13.468307', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:14:13.468307', '2018-02-04 17:14:13.468307', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-04 17:14:13.477769', '2018-02-04 17:14:13.477769', 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-04 17:14:13.477769', '2018-02-04 17:14:13.477769', 694384993)[0m
  [1m[35m (78.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CoursesControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
CoursesControllerTest: test_should_create_course
------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
CoursesControllerTest: test_should_destroy_course
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
CoursesControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CoursesControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
CoursesControllerTest: test_should_update_course
------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
CoursesControllerTest: test_should_show_course
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_students
-------------------------------------------------------------------------
  [1m[36mCourse Load (0.5ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT "evaluations".* FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 464715983]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 464715983]]
  [1m[35mSQL (24.4ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "courses" WHERE "courses"."id" = ?[0m  [["id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCoursesStudent Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses_students" WHERE (course_id = 266338499) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_valid_adding_associated_evaluations
-----------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-04 17:14:13.901600"], ["updated_at", "2018-02-04 17:14:13.901600"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (7.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
CourseTest: test_should_not_valid_already_exist_course
------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2016], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2017], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CourseTest: test_should_not_valid_course_without_year_attribute
---------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_not_valid_incorrectly_year's_format
-----------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 457], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", -2017], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 1987], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_adding_associated_students
--------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ? LIMIT ?[0m  [["course_id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CourseTest: test_should_valid_correctly_year's_format
-----------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CourseTest: test_should_not_valid_year_out_of_accepted_range
------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2013], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2023], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2014], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2021], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_course_with_year_attribute
--------------------------------------------------------
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_evaluations
----------------------------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT "evaluations".* FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (5.2ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses" WHERE "courses"."id" = ?[0m  [["id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvaluation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "evaluations" WHERE (course_id = 266338499) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
StudentGradeTest: test_should_not_valid_student's_grade_without_all_attributes
------------------------------------------------------------------------------
  [1m[36mStudentGrade Load (0.5ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 94782890], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 824998152], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 224919708], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 870681499], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.5ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
StudentGradeTest: test_should_valid_approved?
---------------------------------------------
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 94782890], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 824998152], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 224919708], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 870681499], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
StudentGradeTest: test_should_valid_student's_grade_with_all_attributes
-----------------------------------------------------------------------
  [1m[36mStudentGrade Load (0.3ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 94782890], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.3ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 824998152], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 224919708], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 870681499], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 21458794], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "josegonzalez@mail.com"], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mCourse Load (0.6ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 694384993]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 464715983], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
EvaluationsControllerTest: test_should_create_evaluation
--------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
EvaluationsControllerTest: test_should_destroy_evaluation
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
EvaluationsControllerTest: test_should_get_index
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
EvaluationsControllerTest: test_should_get_new
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
EvaluationsControllerTest: test_should_update_evaluation
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EvaluationsControllerTest: test_should_show_evaluation
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
EvaluationsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_approved
----------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
EvaluationTest: test_should_valid_deleting_evaluation_and_its_associated_students_grades
----------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (4.5ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "student_grades" WHERE (evaluation_id = 45859956) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (6.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
EvaluationTest: test_should_valid_adding_students_grades_of_evaluation
----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_with_different_date_to_year's_course
-------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_without_all_attributes
-----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
EvaluationTest: test_should_valid_amount_of_disapproved
-------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_approval_percentage
-----------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.4ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 608570453], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (18.3ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 608570453], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT "students".* FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT "students".* FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new_evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-04 17:14:16.472119"], ["updated_at", "2018-02-04 17:14:16.472119"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 813516266]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516266]]
  [1m[35m (4.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
EvaluationTest: test_should_valid_evaluation_with_all_attributes
----------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.5ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_absentees
-----------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new_evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-04 17:14:16.565345"], ["updated_at", "2018-02-04 17:14:16.565345"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516266]]
  [1m[35m (2.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_get_create
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
SessionsControllerTest: test_should_get_destroy
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
StudentsControllerTest: test_should_update_student
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
StudentsControllerTest: test_should_create_student
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
StudentsControllerTest: test_should_destroy_student
---------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
StudentsControllerTest: test_should_show_student
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
StudentsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
StudentsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
StudentsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTest: test_should_not_valid_student_without_all_required_attributes
--------------------------------------------------------------------------
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
StudentTest: test_should_valid_grade_in
---------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ? AND "student_grades"."evaluation_id" = 45859956 LIMIT ?[0m  [["student_id", 203926304], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ? AND "student_grades"."evaluation_id" = 45859956 LIMIT ?[0m  [["student_id", 694384993], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ? AND "student_grades"."evaluation_id" = 813516265 LIMIT ?[0m  [["student_id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
StudentTest: test_should_valid_deleting_student_and_inscription_in_his/her_courses
----------------------------------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (6.2ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 870681499]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 897861732]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "students" WHERE "students"."id" = ?[0m  [["id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35m (2.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
StudentTest: test_should_valid_adding_grade_for_evaluation
----------------------------------------------------------
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" INNER JOIN "student_grades" ON "evaluations"."id" = "student_grades"."evaluation_id" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 464715983], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (40.7ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "evaluation_id", "student_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["grade", 8.0], ["evaluation_id", 464715983], ["student_id", 203926304], ["created_at", "2018-02-04 17:14:17.387382"], ["updated_at", "2018-02-04 17:14:17.387382"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" INNER JOIN "student_grades" ON "evaluations"."id" = "student_grades"."evaluation_id" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35m (4.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
StudentTest: test_should_valid_deleting_student_and_its_associated_grades
-------------------------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (4.0ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 870681499]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 897861732]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "students" WHERE "students"."id" = ?[0m  [["id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "student_grades" WHERE (student_id = 203926304) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (4.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
StudentTest: test_should_valid_student_with_all_attributes
----------------------------------------------------------
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 21458794], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "josegonzalez@mail.com"], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 694384993]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (3.0ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-04 17:14:35.304539', '2018-02-04 17:14:35.304539', 266338499)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-04 17:14:35.304539', '2018-02-04 17:14:35.304539', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-04 17:14:35.314821', '2018-02-04 17:14:35.314821', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-04 17:14:35.320500', '2018-02-04 17:14:35.320500', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-04 17:14:35.320500', '2018-02-04 17:14:35.320500', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-04 17:14:35.320500', '2018-02-04 17:14:35.320500', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-04 17:14:35.320500', '2018-02-04 17:14:35.320500', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-04 17:14:35.328936', '2018-02-04 17:14:35.328936', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:14:35.328936', '2018-02-04 17:14:35.328936', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:14:35.328936', '2018-02-04 17:14:35.328936', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-04 17:14:35.328936', '2018-02-04 17:14:35.328936', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:14:35.328936', '2018-02-04 17:14:35.328936', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:14:35.328936', '2018-02-04 17:14:35.328936', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-04 17:14:35.338598', '2018-02-04 17:14:35.338598', 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-04 17:14:35.338598', '2018-02-04 17:14:35.338598', 694384993)[0m
  [1m[35m (107.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CourseTest: test_should_valid_correctly_year's_format
-----------------------------------------------------
  [1m[36mCourse Load (0.6ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CourseTest: test_should_not_valid_year_out_of_accepted_range
------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2013], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2023], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2014], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2021], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CourseTest: test_should_not_valid_course_without_year_attribute
---------------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_course_with_year_attribute
--------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_not_valid_incorrectly_year's_format
-----------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 457], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", -2017], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 1987], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CourseTest: test_should_valid_adding_associated_students
--------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ? LIMIT ?[0m  [["course_id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
CourseTest: test_should_not_valid_already_exist_course
------------------------------------------------------
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2016], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? LIMIT ?[0m  [["year", 2017], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CourseTest: test_should_valid_adding_associated_evaluations
-----------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-04 17:14:37.233996"], ["updated_at", "2018-02-04 17:14:37.233996"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_evaluations
----------------------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT "evaluations".* FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[36mStudentGrade Load (0.3ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses" WHERE "courses"."id" = ?[0m  [["id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvaluation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "evaluations" WHERE (course_id = 266338499) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CourseTest: test_should_valid_deleting_course_and_its_associated_students
-------------------------------------------------------------------------
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT "evaluations".* FROM "evaluations" WHERE "evaluations"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 464715983]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 464715983]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "courses" WHERE "courses"."id" = ?[0m  [["id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCoursesStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses_students" WHERE (course_id = 266338499) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (2.4ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-04 17:14:47.013818', '2018-02-04 17:14:47.013818', 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-04 17:14:47.013818', '2018-02-04 17:14:47.013818', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-04 17:14:47.023357', '2018-02-04 17:14:47.023357', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-04 17:14:47.029889', '2018-02-04 17:14:47.029889', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-04 17:14:47.029889', '2018-02-04 17:14:47.029889', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-04 17:14:47.029889', '2018-02-04 17:14:47.029889', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-04 17:14:47.029889', '2018-02-04 17:14:47.029889', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-04 17:14:47.038221', '2018-02-04 17:14:47.038221', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:14:47.038221', '2018-02-04 17:14:47.038221', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:14:47.038221', '2018-02-04 17:14:47.038221', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-04 17:14:47.038221', '2018-02-04 17:14:47.038221', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:14:47.038221', '2018-02-04 17:14:47.038221', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:14:47.038221', '2018-02-04 17:14:47.038221', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-04 17:14:47.047501', '2018-02-04 17:14:47.047501', 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-04 17:14:47.047501', '2018-02-04 17:14:47.047501', 694384993)[0m
  [1m[35m (110.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
StudentGradeTest: test_should_valid_student's_grade_with_all_attributes
-----------------------------------------------------------------------
  [1m[36mStudentGrade Load (0.5ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 94782890], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 824998152], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 224919708], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 870681499], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 21458794], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "josegonzalez@mail.com"], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 694384993]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 464715983], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
StudentGradeTest: test_should_not_valid_student's_grade_without_all_attributes
------------------------------------------------------------------------------
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 94782890], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 824998152], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 224919708], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 870681499], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
StudentGradeTest: test_should_valid_approved?
---------------------------------------------
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 94782890], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 824998152], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 224919708], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."id" = ? LIMIT ?[0m  [["id", 870681499], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.6ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-04 17:14:57.491707', '2018-02-04 17:14:57.491707', 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-04 17:14:57.491707', '2018-02-04 17:14:57.491707', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-04 17:14:57.500456', '2018-02-04 17:14:57.500456', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-04 17:14:57.507438', '2018-02-04 17:14:57.507438', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-04 17:14:57.507438', '2018-02-04 17:14:57.507438', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-04 17:14:57.507438', '2018-02-04 17:14:57.507438', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-04 17:14:57.507438', '2018-02-04 17:14:57.507438', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-04 17:14:57.515788', '2018-02-04 17:14:57.515788', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:14:57.515788', '2018-02-04 17:14:57.515788', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:14:57.515788', '2018-02-04 17:14:57.515788', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-04 17:14:57.515788', '2018-02-04 17:14:57.515788', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:14:57.515788', '2018-02-04 17:14:57.515788', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:14:57.515788', '2018-02-04 17:14:57.515788', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-04 17:14:57.525877', '2018-02-04 17:14:57.525877', 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-04 17:14:57.525877', '2018-02-04 17:14:57.525877', 694384993)[0m
  [1m[35m (100.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
StudentTest: test_should_valid_grade_in
---------------------------------------
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ? AND "student_grades"."evaluation_id" = 45859956 LIMIT ?[0m  [["student_id", 203926304], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ? AND "student_grades"."evaluation_id" = 45859956 LIMIT ?[0m  [["student_id", 694384993], ["LIMIT", 1]]
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT  "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ? AND "student_grades"."evaluation_id" = 813516265 LIMIT ?[0m  [["student_id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
StudentTest: test_should_valid_student_with_all_attributes
----------------------------------------------------------
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (1.6ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 21458794], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "josegonzalez@mail.com"], ["id", 694384993], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 694384993]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
StudentTest: test_should_valid_deleting_student_and_inscription_in_his/her_courses
----------------------------------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (6.1ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 870681499]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 897861732]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "students" WHERE "students"."id" = ?[0m  [["id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35m (4.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
StudentTest: test_should_valid_adding_grade_for_evaluation
----------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" INNER JOIN "student_grades" ON "evaluations"."id" = "student_grades"."evaluation_id" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 464715983], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["dni", 39548876], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? AND ("students"."id" != ?) LIMIT ?[0m  [["email", "juanperez@gmail.com"], ["id", 203926304], ["LIMIT", 1]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT "courses".* FROM "courses" INNER JOIN "courses_students" ON "courses"."id" = "courses_students"."course_id" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "evaluation_id", "student_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["grade", 8.0], ["evaluation_id", 464715983], ["student_id", 203926304], ["created_at", "2018-02-04 17:14:57.891536"], ["updated_at", "2018-02-04 17:14:57.891536"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "evaluations" INNER JOIN "student_grades" ON "evaluations"."id" = "student_grades"."evaluation_id" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTest: test_should_not_valid_student_without_all_required_attributes
--------------------------------------------------------------------------
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."dni" = ? LIMIT ?[0m  [["dni", 41034784], ["LIMIT", 1]]
  [1m[36mStudent Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "students" WHERE "students"."email" = ? LIMIT ?[0m  [["email", "curu@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
StudentTest: test_should_valid_deleting_student_and_its_associated_grades
-------------------------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.2ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (1.7ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 870681499]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 897861732]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "courses_students" WHERE "courses_students"."student_id" = ?[0m  [["student_id", 203926304]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "students" WHERE "students"."id" = ?[0m  [["id", 203926304]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "student_grades" WHERE (student_id = 203926304) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.8ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-04 17:15:43.557493', '2018-02-04 17:15:43.557493', 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-04 17:15:43.557493', '2018-02-04 17:15:43.557493', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-04 17:15:43.566976', '2018-02-04 17:15:43.566976', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-04 17:15:43.572874', '2018-02-04 17:15:43.572874', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-04 17:15:43.572874', '2018-02-04 17:15:43.572874', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-04 17:15:43.572874', '2018-02-04 17:15:43.572874', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-04 17:15:43.572874', '2018-02-04 17:15:43.572874', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-04 17:15:43.582321', '2018-02-04 17:15:43.582321', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:15:43.582321', '2018-02-04 17:15:43.582321', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:15:43.582321', '2018-02-04 17:15:43.582321', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-04 17:15:43.582321', '2018-02-04 17:15:43.582321', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:15:43.582321', '2018-02-04 17:15:43.582321', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:15:43.582321', '2018-02-04 17:15:43.582321', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-04 17:15:43.592641', '2018-02-04 17:15:43.592641', 203926304)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-04 17:15:43.592641', '2018-02-04 17:15:43.592641', 694384993)[0m
  [1m[35m (94.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_approved
----------------------------------------------------
  [1m[36mEvaluation Load (0.6ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
EvaluationTest: test_should_valid_adding_students_grades_of_evaluation
----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[36mStudent Load (0.6ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_absentees
-----------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new_evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-04 17:15:43.904744"], ["updated_at", "2018-02-04 17:15:43.904744"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516266]]
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_with_different_date_to_year's_course
-------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
EvaluationTest: test_should_valid_amount_of_disapproved
-------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_without_all_attributes
-----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
EvaluationTest: test_should_valid_deleting_evaluation_and_its_associated_students_grades
----------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.4ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (1.6ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "student_grades" WHERE (evaluation_id = 45859956) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
EvaluationTest: test_should_valid_evaluation_with_all_attributes
----------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_approval_percentage
-----------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 608570453], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 608570453], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT "students".* FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT "students".* FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[36mCourse Load (0.4ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new_evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-04 17:15:45.672677"], ["updated_at", "2018-02-04 17:15:45.672677"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 813516266]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516266]]
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.7ms)[0m  [1m[31mDELETE FROM "courses"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2016, '2018-02-04 17:17:33.989523', '2018-02-04 17:17:33.989523', 266338499)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "courses" ("year", "created_at", "updated_at", "id") VALUES (2017, '2018-02-04 17:17:33.989523', '2018-02-04 17:17:33.989523', 608570453)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "created_at", "updated_at", "id") VALUES ('example@mail.com', 'first name', 'last_name', '2018-02-04 17:17:33.998136', '2018-02-04 17:17:33.998136', 980190962)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "evaluations"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('first', 6, '2016-10-20 18:00:00', '2018-02-04 17:17:34.004164', '2018-02-04 17:17:34.004164', 45859956, 266338499)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('second', 7, '2017-10-20 18:00:00', '2018-02-04 17:17:34.004164', '2018-02-04 17:17:34.004164', 813516265, 608570453)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('third', 8, '2017-11-20 18:00:00', '2018-02-04 17:17:34.004164', '2018-02-04 17:17:34.004164', 583219105, 608570453)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "created_at", "updated_at", "id", "course_id") VALUES ('fourth', 5, '2016-11-20 18:00:00', '2018-02-04 17:17:34.004164', '2018-02-04 17:17:34.004164', 464715983, 266338499)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "student_grades"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (10, '2018-02-04 17:17:34.012768', '2018-02-04 17:17:34.012768', 94782890, 45859956, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:17:34.012768', '2018-02-04 17:17:34.012768', 824998152, 45859956, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (5, '2018-02-04 17:17:34.012768', '2018-02-04 17:17:34.012768', 897861732, 813516265, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (-2, '2018-02-04 17:17:34.012768', '2018-02-04 17:17:34.012768', 224919708, 813516265, 694384993)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:17:34.012768', '2018-02-04 17:17:34.012768', 870681499, 583219105, 203926304)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "student_grades" ("grade", "created_at", "updated_at", "id", "evaluation_id", "student_id") VALUES (8, '2018-02-04 17:17:34.012768', '2018-02-04 17:17:34.012768', 124761917, 583219105, 694384993)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "students"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Juan', 'Perez', 39548876, '12345/6', 'juanperez@gmail.com', '2018-02-04 17:17:34.022433', '2018-02-04 17:17:34.022433', 203926304)[0m
  [1m[36mFixture Insert (1.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "dni", "number", "email", "created_at", "updated_at", "id") VALUES ('Jose', 'Gonzalez', 21458794, '78910/1', 'josegonzalez@mail.com', '2018-02-04 17:17:34.022433', '2018-02-04 17:17:34.022433', 694384993)[0m
  [1m[35m (110.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_with_different_date_to_year's_course
-------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.4ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_approved
----------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
EvaluationTest: test_should_not_valid_evaluation_without_all_attributes
-----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_amount_of_absentees
-----------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new_evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-04 17:17:35.854308"], ["updated_at", "2018-02-04 17:17:35.854308"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516266]]
  [1m[35m (2.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
EvaluationTest: test_should_valid_deleting_evaluation_and_its_associated_students_grades
----------------------------------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Load (0.3ms)[0m  [1m[34mSELECT "student_grades".* FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35mSQL (1.7ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 94782890]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "student_grades" WHERE "student_grades"."id" = ?[0m  [["id", 824998152]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "evaluations" WHERE "evaluations"."id" = ?[0m  [["id", 45859956]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentGrade Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "student_grades" WHERE (evaluation_id = 45859956) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
EvaluationTest: test_should_valid_evaluation_with_all_attributes
----------------------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2017], ["id", 608570453], ["LIMIT", 1]]
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
EvaluationTest: test_should_valid_amount_of_disapproved
-------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
EvaluationTest: test_should_valid_adding_students_grades_of_evaluation
----------------------------------------------------------------------
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.2ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
EvaluationTest: test_should_valid_approval_percentage
-----------------------------------------------------
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 45859956], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 813516265], ["LIMIT", 1]]
  [1m[36mEvaluation Load (0.3ms)[0m  [1m[34mSELECT  "evaluations".* FROM "evaluations" WHERE "evaluations"."id" = ? LIMIT ?[0m  [["id", 583219105], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[36mCourse Load (0.2ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 203926304], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 608570453], ["student_id", 203926304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 694384993], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 608570453], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT "students".* FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT "students".* FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 203926304]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "courses_students" ("course_id", "student_id") VALUES (?, ?)[0m  [["course_id", 266338499], ["student_id", 694384993]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 45859956]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 266338499]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 45859956]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 7)[0m  [["evaluation_id", 813516265]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516265]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 8)[0m  [["evaluation_id", 583219105]]
  [1m[36mCourse Load (0.3ms)[0m  [1m[34mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = ? LIMIT ?[0m  [["id", 608570453], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" INNER JOIN "courses_students" ON "students"."id" = "courses_students"."student_id" WHERE "courses_students"."course_id" = ?[0m  [["course_id", 608570453]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 583219105]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "evaluations" ("title", "approbation_grade", "date", "course_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "new_evaluation"], ["approbation_grade", 6], ["date", "2016-01-01 03:00:00"], ["course_id", 266338499], ["created_at", "2018-02-04 17:17:36.078931"], ["updated_at", "2018-02-04 17:17:36.078931"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCourse Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "courses" WHERE "courses"."year" = ? AND ("courses"."id" != ?) LIMIT ?[0m  [["year", 2016], ["id", 266338499], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ? AND (grade >= 6)[0m  [["evaluation_id", 813516266]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_grades" WHERE "student_grades"."evaluation_id" = ?[0m  [["evaluation_id", 813516266]]
  [1m[35m (2.4ms)[0m  [1m[31mrollback transaction[0m
